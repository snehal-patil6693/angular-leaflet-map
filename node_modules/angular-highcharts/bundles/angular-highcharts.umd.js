(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('highcharts'), require('rxjs'), require('@angular/core'), require('highcharts/highmaps'), require('highcharts/highstock'), require('highcharts/highcharts-gantt')) :
    typeof define === 'function' && define.amd ? define('angular-highcharts', ['exports', 'highcharts', 'rxjs', '@angular/core', 'highcharts/highmaps', 'highcharts/highstock', 'highcharts/highcharts-gantt'], factory) :
    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global['angular-highcharts'] = {}, global.Highcharts, global.rxjs, global.ng.core, global.Highmaps, global.Highstock, global.HighchartsGantt));
}(this, (function (exports, Highcharts, rxjs, core, Highmaps, Highstock, Highcharts$1) { 'use strict';

    function _interopNamespace(e) {
        if (e && e.__esModule) return e;
        var n = Object.create(null);
        if (e) {
            Object.keys(e).forEach(function (k) {
                if (k !== 'default') {
                    var d = Object.getOwnPropertyDescriptor(e, k);
                    Object.defineProperty(n, k, d.get ? d : {
                        enumerable: true,
                        get: function () {
                            return e[k];
                        }
                    });
                }
            });
        }
        n['default'] = e;
        return Object.freeze(n);
    }

    var Highcharts__namespace = /*#__PURE__*/_interopNamespace(Highcharts);
    var Highmaps__namespace = /*#__PURE__*/_interopNamespace(Highmaps);
    var Highstock__namespace = /*#__PURE__*/_interopNamespace(Highstock);
    var Highcharts__namespace$1 = /*#__PURE__*/_interopNamespace(Highcharts$1);

    var Chart = /** @class */ (function () {
        function Chart(options) {
            if (options === void 0) { options = { series: [] }; }
            this.options = options;
            this.refSubject = new rxjs.AsyncSubject();
            this.ref$ = this.refSubject.asObservable();
        }
        /**
         * Add Point
         * @param point         Highcharts.DataPoint, number touple or number
         * @param serieIndex    Index position of series. This defaults to 0.
         * @param redraw        Flag whether or not to redraw point. This defaults to true.
         * @param shift         Shift point to the start of series. This defaults to false.
         */
        Chart.prototype.addPoint = function (point, serieIndex, redraw, shift) {
            if (serieIndex === void 0) { serieIndex = 0; }
            if (redraw === void 0) { redraw = true; }
            if (shift === void 0) { shift = false; }
            this.ref$.subscribe(function (chart) {
                if (chart.series.length > serieIndex) {
                    chart.series[serieIndex].addPoint(point, redraw, shift);
                }
            });
        };
        /**
         * Add Series
         * @param series        Series Configuration
         * @param redraw        Flag whether or not to redraw series. This defaults to true.
         * @param animation     Whether to apply animation, and optionally animation configuration. This defaults to false.
         */
        Chart.prototype.addSeries = function (series, redraw, animation) {
            if (redraw === void 0) { redraw = true; }
            this.ref$.subscribe(function (chart) {
                chart.addSeries(series, redraw, animation);
            });
        };
        /**
         * Remove Point
         * @param pointIndex    Index of Point
         * @param serieIndex    Specified Index of Series. Defaults to 0.
         */
        Chart.prototype.removePoint = function (pointIndex, serieIndex) {
            if (serieIndex === void 0) { serieIndex = 0; }
            this.ref$.subscribe(function (chart) {
                if (chart.series.length > serieIndex && chart.series[serieIndex].data.length > pointIndex) {
                    chart.series[serieIndex].removePoint(pointIndex, true);
                }
            });
        };
        /**
         * Remove Series
         * @param seriesIndex    Index position of series to remove.
         */
        Chart.prototype.removeSeries = function (seriesIndex) {
            this.ref$.subscribe(function (chart) {
                if (chart.series.length > seriesIndex) {
                    chart.series[seriesIndex].remove(true);
                }
            });
        };
        Chart.prototype.init = function (el) {
            var _this = this;
            if (!this.ref) {
                Highcharts__namespace.chart(el.nativeElement, this.options, function (chart) {
                    if (!_this.ref) { // TODO: workaround for doubled callbacks on exporting charts: issue #238
                        _this.refSubject.next(chart);
                        _this.ref = chart;
                        _this.refSubject.complete();
                    }
                });
            }
        };
        Chart.prototype.destroy = function () {
            if (this.ref) {
                this.options = this.ref.options;
                this.ref.destroy();
                this.ref = undefined;
                // new init subject
                this.refSubject = new rxjs.AsyncSubject();
                this.ref$ = this.refSubject.asObservable();
            }
        };
        return Chart;
    }());

    // import * as Highcharts from 'highcharts';
    /**
     * @license
     * Copyright Felix Itzenplitz. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at
     * https://github.com/cebor/angular-highcharts/blob/master/LICENSE
     */
    var MapChart = /** @class */ (function () {
        function MapChart(options) {
            if (options === void 0) { options = { series: [] }; }
            this.options = options;
            this.refSubject = new rxjs.AsyncSubject();
            this.ref$ = this.refSubject.asObservable();
        }
        MapChart.prototype.init = function (el) {
            var _this = this;
            if (!this.ref) {
                Highmaps__namespace.mapChart(el.nativeElement, this.options, function (chart) {
                    if (!_this.ref) { // TODO: workaround for doubled callbacks on exporting charts: issue #238
                        _this.refSubject.next(chart);
                        _this.ref = chart;
                        _this.refSubject.complete();
                    }
                });
            }
        };
        MapChart.prototype.destroy = function () {
            if (this.ref) {
                this.options = this.ref.options;
                this.ref.destroy();
                this.ref = undefined;
                // new init subject
                this.refSubject = new rxjs.AsyncSubject();
                this.ref$ = this.refSubject.asObservable();
            }
        };
        return MapChart;
    }());

    //import * as Highcharts from 'highcharts';
    /**
     * @license
     * Copyright Felix Itzenplitz. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at
     * https://github.com/cebor/angular-highcharts/blob/master/LICENSE
     *
     * @author Felix Itzenplitz
     * @author Timothy A. Perez (contributor)
     */
    var StockChart = /** @class */ (function () {
        function StockChart(options) {
            if (options === void 0) { options = { series: [] }; }
            this.options = options;
            this.refSubject = new rxjs.AsyncSubject();
            this.ref$ = this.refSubject.asObservable();
        }
        StockChart.prototype.init = function (el) {
            var _this = this;
            if (!this.ref) {
                Highstock__namespace.stockChart(el.nativeElement, this.options, function (chart) {
                    if (!_this.ref) { // TODO: workaround for doubled callbacks on exporting charts: issue #238
                        _this.refSubject.next(chart);
                        _this.ref = chart;
                        _this.refSubject.complete();
                    }
                });
            }
        };
        StockChart.prototype.destroy = function () {
            if (this.ref) {
                this.options = this.ref.options;
                this.ref.destroy();
                this.ref = undefined;
                // new init subject
                this.refSubject = new rxjs.AsyncSubject();
                this.ref$ = this.refSubject.asObservable();
            }
        };
        return StockChart;
    }());

    /**
     * @license
     * Copyright Felix Itzenplitz. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at
     * https://github.com/cebor/angular-highcharts/blob/master/LICENSE
     */
    var HighchartsGantt = /** @class */ (function () {
        function HighchartsGantt(options) {
            if (options === void 0) { options = { series: [] }; }
            this.options = options;
            this.refSubject = new rxjs.AsyncSubject();
            this.ref$ = this.refSubject.asObservable();
        }
        HighchartsGantt.prototype.init = function (el) {
            var _this = this;
            if (!this.ref) {
                Highcharts__namespace$1.ganttChart(el.nativeElement, this.options, function (chart) {
                    if (!_this.ref) { // TODO: workaround for doubled callbacks on exporting charts: issue #238
                        _this.refSubject.next(chart);
                        _this.ref = chart;
                        _this.refSubject.complete();
                    }
                });
            }
        };
        HighchartsGantt.prototype.destroy = function () {
            if (this.ref) {
                this.options = this.ref.options;
                this.ref.destroy();
                this.ref = undefined;
                // new init subject
                this.refSubject = new rxjs.AsyncSubject();
                this.ref$ = this.refSubject.asObservable();
            }
        };
        return HighchartsGantt;
    }());

    /**
     * @license
     * Copyright Felix Itzenplitz. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at
     * https://github.com/cebor/angular-highcharts/blob/master/LICENSE
     */
    var ChartDirective = /** @class */ (function () {
        function ChartDirective(el) {
            this.el = el;
        }
        ChartDirective.prototype.ngOnChanges = function (changes) {
            if (!changes.chart.isFirstChange()) {
                this.destroy();
                this.init();
            }
        };
        ChartDirective.prototype.ngOnInit = function () {
            this.init();
        };
        ChartDirective.prototype.ngOnDestroy = function () {
            this.destroy();
        };
        ChartDirective.prototype.init = function () {
            if (this.chart instanceof Chart || this.chart instanceof StockChart || this.chart instanceof MapChart
                || this.chart instanceof HighchartsGantt) {
                this.chart.init(this.el);
            }
        };
        ChartDirective.prototype.destroy = function () {
            if (this.chart instanceof Chart || this.chart instanceof StockChart || this.chart instanceof MapChart
                || this.chart instanceof HighchartsGantt) {
                this.chart.destroy();
            }
        };
        return ChartDirective;
    }());
    ChartDirective.decorators = [
        { type: core.Directive, args: [{
                    selector: '[chart]'
                },] }
    ];
    /** @nocollapse */
    ChartDirective.ctorParameters = function () { return [
        { type: core.ElementRef }
    ]; };
    ChartDirective.propDecorators = {
        chart: [{ type: core.Input }]
    };

    /**
     * @license
     * Copyright Felix Itzenplitz. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at
     * https://github.com/cebor/angular-highcharts/blob/master/LICENSE
     */
    var HIGHCHARTS_MODULES = new core.InjectionToken('HighchartsModules');
    var ChartService = /** @class */ (function () {
        function ChartService(chartModules) {
            this.chartModules = chartModules;
        }
        ChartService.prototype.initModules = function () {
            this.chartModules.forEach(function (chartModule) {
                [Highcharts__namespace, Highstock__namespace, Highmaps__namespace, Highcharts__namespace$1].forEach(chartModule);
            });
        };
        return ChartService;
    }());
    ChartService.decorators = [
        { type: core.Injectable }
    ];
    /** @nocollapse */
    ChartService.ctorParameters = function () { return [
        { type: Array, decorators: [{ type: core.Inject, args: [HIGHCHARTS_MODULES,] }] }
    ]; };

    /**
     * @license
     * Copyright Felix Itzenplitz. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at
     * https://github.com/cebor/angular-highcharts/blob/master/LICENSE
     */
    var ɵ0 = [];
    var ChartModule = /** @class */ (function () {
        function ChartModule(cs) {
            this.cs = cs;
            this.cs.initModules();
        }
        return ChartModule;
    }());
    ChartModule.decorators = [
        { type: core.NgModule, args: [{
                    exports: [ChartDirective],
                    declarations: [ChartDirective],
                    providers: [
                        { provide: HIGHCHARTS_MODULES, useValue: ɵ0 },
                        ChartService
                    ]
                },] }
    ];
    /** @nocollapse */
    ChartModule.ctorParameters = function () { return [
        { type: ChartService }
    ]; };

    /*
     * Public API Surface of angular-highcharts
     */

    /**
     * Generated bundle index. Do not edit.
     */

    exports.Chart = Chart;
    exports.ChartDirective = ChartDirective;
    exports.ChartModule = ChartModule;
    exports.HIGHCHARTS_MODULES = HIGHCHARTS_MODULES;
    exports.HighchartsGantt = HighchartsGantt;
    exports.MapChart = MapChart;
    exports.StockChart = StockChart;
    exports.ɵa = ChartService;

    Object.defineProperty(exports, '__esModule', { value: true });

})));
//# sourceMappingURL=angular-highcharts.umd.js.map
